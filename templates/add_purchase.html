{% extends 'base.html' %}
{% block content %}
<div class="page-wrapper">
    <div class="content">
        <div class="page-header">
            <div class="page-title">
                <h4>Add Purchase</h4>
            </div>
        </div>

        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
        <div class="alert-container">
            {% for category, message in messages %}
            <div class="alert alert-{{ category }}">{{ message }}</div>
            {% endfor %}
        </div>
        {% endif %}
        {% endwith %}

        <form method="POST" action="/add_purchase">
            <div class="card">
                <div class="card-body">
                    <div class="row">
                        <!-- Raw Material Selection -->
                        <div class="col-lg-4 col-sm-6 col-12">
                            <div class="form-group">
                                <label>Raw Material</label>
                                <select name="raw_material_id" class="select form-control" required>
                                    <option value="">Select Raw Material</option>
                                    {% for material in raw_materials %}
                                    <option value="{{ material[0] }}">{{ material[1] }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>

                        <!-- Quantity -->
                        <div class="col-lg-4 col-sm-6 col-12">
                            <div class="form-group">
                                <label>Quantity</label>
                                <input type="number" name="quantity" class="form-control" step="0.01"
                                    placeholder="Enter Quantity" required>
                            </div>
                        </div>

                        <!-- Unit -->
                        <div class="col-lg-4 col-sm-6 col-12">
                            <div class="form-group">
                                <label>Unit</label>
                                <select name="unit" class="select form-control" required>
                                    <option value="">Select Unit</option>
                                    <option value="kg">Kilograms (kg)</option>
                                    <option value="liters">Liters</option>
                                </select>
                            </div>
                        </div>

                        <!-- Total Cost -->
                        <div class="col-lg-4 col-sm-6 col-12">
                            <div class="form-group">
                                <label>Total Cost</label>
                                <input type="number" name="total_cost" class="form-control" step="0.01"
                                    placeholder="Enter Total Cost" required>
                            </div>
                        </div>

                        <!-- Purchase Date -->
                        <div class="col-lg-4 col-sm-6 col-12">
                            <div class="form-group">
                                <label>Purchase Date</label>
                                <input type="date" name="purchase_date" class="form-control" required>
                            </div>
                        </div>

                        <!-- Inventory Selection -->
                        <div class="col-lg-4 col-sm-6 col-12">
                            <div class="form-group">
                                <label>Inventory</label>
                                <select name="inventory_id" class="select form-control" required>
                                    <option value="">Select Inventory</option>
                                    {% for inventory in inventories %}
                                    <option value="{{ inventory[0] }}">{{ inventory[1] }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-3">
                        <div class="col-lg-12">
                            <button type="submit" class="btn btn-submit me-2">Submit</button>
                            <a href="/" class="btn btn-cancel">Cancel</a>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
{% endblock %}
